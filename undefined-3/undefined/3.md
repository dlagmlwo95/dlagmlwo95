# \#3

## \#3-1,2 Making a JS Clock part

{% tabs %}
{% tab title="HTML" %}
```markup
<div class="js-clock">
<h1>00:00</h1>
</div>
```
{% endtab %}

{% tab title="JAVASCRIPT" %}
```java
const clockContainer = document.querySelector(".js-clock"),
  clockTitle = clockContainer.querySelector("h1");

function getTime() {
  const date = new Date();
  const minutes = date.getMinutes();
  const hours = date.getHours();
  const seconds = date.getSeconds();
  clockTitle.innerText =
    // ? 은 작은 if. seconds가 10보다작으면 `0${seconds}` 크면 seconds 실행
    `${hours < 10 ? `0${hours}` : hours} : ${
      minutes < 10 ? `0${minutes}` : minutes
    } : ${seconds < 10 ? `0${seconds}` : seconds}`;
}
function init() {
  getTime();
  setInterval(getTime, 1000);
}
init();

```
{% endtab %}
{% endtabs %}

## \#3-3,4 Saving the User Name part

{% tabs %}
{% tab title="HTML" %}
```markup
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>document</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="js-clock">
    <h1>00:00:00</h1>
  </div>
  <form action="" class="js-form form">
    <input type="text" placeholder="What is your name?">
  </form>
  <p class="js-greeting"></p>
  <script src="clock.js"></script>
  <srcipt src="greeting.js"></script>
</body>
</html>
```
{% endtab %}

{% tab title="JAVASCRIPT" %}
```javascript
const form = document.querySelector(".js-form"),
  input = form.querySelector("input"),
  greeting = document.querySelector(".js-greetings");
const USER_LS = "currentUser",
  SHOWING_CN = "showing";

function saveName(text) {
  //값 지정
  localStorage.setItem(USER_LS, text);
}

function handleSubmit(event) {
  event.preventDefault();
  //event.preventDefault - 이벤트가 실행되는것을 막음.
  const currentValue = input.value;
  paintGreeting(currentValue);
  saveName(currentValue);
}

function askForName() {
  form.classList.add(SHOWING_CN);
  form.addEventListener("submit", handleSubmit);
}

function paintGreeting(text) {
  form.classList.remove(SHOWING_CN);
  greeting.classList.add(SHOWING_CN);
  greeting.innerText = `Hello ${text}`;
}

function loadName() {
  //값 찾기
  const currentUser = localStorage.getItem(USER_LS);
  if (currentUser === null) {
    askForName();
  } else {
    paintGreeting(currentUser);
  }
}

function init() {
  loadName();
}

```
{% endtab %}
{% endtabs %}

## \#3-5 ,6,7 Making a To Do List part

{% tabs %}
{% tab title="HTML" %}
```markup
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>document</title>
  <link rel="stylesheet" href="clock.css">
</head>
<body>
  <div class="js-clock">
    <h1>00:00:00</h1>
  </div>
  <form class="js-form form">
      <input type="text" placeholder="what is your name?">
  </form>
  <h4 class="js-greetings greetings"></h4>
  <form class="js-toDoForm">
      <input type="text" placeholder="Write a to do">
  </form>
  <ul class="js-toDoList">
      
  </ul>
  <script src="clock.js"></script>
  <srcipt src="gretting.js"></script>
  <srcipt src="todo.js"></script>
</body>
</html>
```
{% endtab %}

{% tab title="JAVASCRIPT" %}
```javascript
const toDoForm = document.querySelector(".js-toDoForm"),
  toDoInput = toDoForm.querySelector("input"),
  toDoList = document.querySelector(".js-toDoList");

const TODOS_LS = "toDos";

let toDos = []; // array에 추가 할 것

function deleteToDo(event) {
  const btn = event.target;
  const li = btn.parentNode;
  toDoList.removeChild(li);
  const cleanToDos = toDos.filter(function (toDo) {
    return toDo.id !== parseInt(li.id);
  });
  toDos = cleanToDos;
  saveToDos();
}

function saveToDos() {
  localStorage.setItem(TODOS_LS, JSON.stringify(toDos));
}

let idNumbers = 1;

function paintToDo(text) {
  const li = document.createElement("li");
  const delBtn = document.createElement("button");
  const span = document.createElement("span");
  const newId = idNumbers;
  idNumbers += 1;
  delBtn.innerText = "X";
  delBtn.addEventListener("click", deleteToDo);
  span.innerText = text;
  li.appendChild(delBtn);
  li.appendChild(span);
  li.id = newId; //각 li에 id값 추가함.
  toDoList.appendChild(li);
  const toDoObj = {
    text: text,
    id: newId,
  };
  toDos.push(toDoObj);
  saveToDos();
}

function handleSubmit(event) {
  event.preventDefault();
  const currentValue = toDoInput.value;
  paintToDo(currentValue);
  toDoInput.value = "";
}

function loadToDos() {
  const loadedToDos = localStorage.getItem(TODOS_LS);
  if (loadedToDos !== null) {
    //JSON : JavaScript Object Notation
    const parsedToDos = JSON.parse(loadedToDos);
    parsedToDos.forEach(function (toDo) {
      paintToDo(toDo.text);
    });
    //forEach는 array에 있는 것들을 한번씩 실행킴.
  }
}

function init() {
  loadToDos();
  toDoForm.addEventListener("submit", handleSubmit);
}
init();

```
{% endtab %}
{% endtabs %}

## \#3-8 Image Background

```javascript
const body = document.querySelector('body');

const IMG_NUMBER = 3;

function paintImage(imgNumber) {
  const image = new Image();
  image.src = `images/${imgNumber + 1}.jpg`;
  image.classList.add("bgImage");
  body.prepend(image);
}

function genRandom() {
  const number = Math.floor(Math.random() * IMG_NUMBER);
  //Math.random() 0- 1
  //Math.floor()
  //Math.ceil()
  return number;
}

function init() {
  const randomNumber = genRandom();
  paintImage(randomNumber);
}

init();

```

## \#3-9,10 Getting the Weather part

```javascript
const weather = document.querySelector(".js-weather");
const API_KEY = "4b16382c1bdc0d320c02b8ddc943ead0";
const COORDS = "coords";

function getWeather(lat, lng) {
  fetch(`https://`)
    .then(function (response) {
      return response.json();
    })
    .then(function (json) {
      const temperature = json.main.temp;
      const place = json.name;
      weather.innerText = `${temperature} @ ${place}`;
    });
}
function saveCoords(coordsObj) {
  localStorage.setItem(COORDS, JSON.stringify(coordsObj));
}

function handleGeoSucces(position) {
  const latitude = position.coords.latitude;
  const longitude = position.coords.longitude;
  const coordsObj = {
    latitude: latitude,
    longitude: longitude,
  };
  saveCoords(coordsObj);
  getWeather(latitude, longitude);
}

function handleGeoError() {
  console.log("Cant access geo location");
}
function askForCoords() {
  navigator.geolocation.getCurrentPosition(handleGeoSucces, handleGeoError);
}

function loadCoords() {
  const loadedCoords = localStorage.getItem(COORDS);
  if (loadedCoords === null) {
    askForCoords();
  } else {
    const parseCoords = JSON.parse(loadedCoords);
    getWeather(parseCoords.latitude, parseCoords.longitude);
  }
}

function init() {
  loadCoords();
}
init();
```

```markup
<!--html-->
<span class="js-weather"></span>
```

